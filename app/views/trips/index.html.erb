<div class="banner">

  <div class="header-text">
    <h1>Find a driver and send your item on a ride</h1>
      <%= form_tag trips_path, method: :get do %>
            <%= text_field_tag :start_location,
              params[:start_location],
              class: "form-controll",
              placeholder: "From"
            %>
            <%= text_field_tag :end_location,
              params[:end_location],
              class: "form-controll",
              placeholder: "To"
            %>
            <%= date_field_tag :date,
              params[:date],
              class: "form-controll",
              placeholder: "To"
            %>
              <%= select_tag(:capacity, options_for_select(Trip::CAPACITY, params[:capacity])) %>
            <%= submit_tag "Find a driver" %>
          <% end %>
  </div>
</div>

<% if @trips.count.positive? %>
  <h5>Trips leaving today</h5>
  <div class="container d-flex justify-contents-between">
    <ul class="trip-details">
      <% @trips.each do |trip| %>
        <div class="card">
          <li> <%= trip.start_time.strftime("%k:%M") %> <strong><%= trip.start_location.split(',')[1] %></strong></li>
          <li> <%= trip.end_time.strftime("%k:%M") %> <strong><%= trip.end_location.split(',')[1] %></strong></li>
          <li class="line">Accepts <%= trip.capacity.downcase %> items</li>
          <div class="name-price">
            <div><li> <%= trip.user.first_name %></li></div>
            <div><li> <strong><%= humanized_money_with_symbol trip.price %></li></strong></div>
          </div>
        </div>
       <% end %>
    </ul>
    <div id="map"
     style="width: 100%; height: 100vh;"
     data-markers="<%= @markers.to_json %>"
     data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"></div>
  </div>
<% else %>
  <div class="results-container">
    <h5>No trips available</h5>
    <h5>Please change your search criteria and try again!</h5>
  </div>
<% end %>
