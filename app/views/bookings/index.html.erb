<div class="container">

  <h1><%= @trip.start_location %> <%= @trip.start_time.strftime("%A, %B %d") %></h1>

  <div class="cards d-flex flex-row justify-space-around flex-wrap">
    <% @bookings.each_with_index do |booking, index| %>
      <div class="card">
        <div class="container card-items">
          <div><%= image_tag booking.user.avatar, class: 'avatar' %></div>
          <h3><%= booking.user.first_name %></h3>
        </div>
        <div class="container">
          <p><i class="fas fa-box-open"></i> <%= booking.item %></p>
          <p><i class="fas fa-compress-alt"></i> <%= booking.size %></p>
          <p><i class="far fa-heart"></i> needs to be coded</p>
        </div>
        <div class="container">
          <div class="grey-field">
            <%= booking.description %>
          </div>
        </div>
        <div class="container">
          <% if booking.pending? %>
            <button class="button" id="modal-trigger-button" data-tracker="<%=index%>">Accept</button>
            <%= link_to "Decline", decline_path(booking.trip.id), class: "button", method: :patch, controller: :bookings_controller, 
                data: { confirm: 'Are you sure you want to decline this booking?' } %>
          <% else %>
            <p> ã€‰Request <%= booking.status.capitalize %> </p>
          <% end %>
        </div>
      </div>

        <div class="modal-container modal-<%=index%> modal-hidden" id="accept-modal">
          <div class="modal-inner">
            <div class="modal-text">
              <p>
                You listed your trip capacity as <%= @trip.capacity %>. Would you like to leave your trip listed and accept more bookings, or have you reached capacity?
              </p>
            </div>
            <div class="modal-buttons">
              <%= link_to "Keep Listing", accept_path(booking.trip.id, remove_listing: false), class: "button", method: :patch, controller: :bookings_controller %>
              <%= link_to "Remove Listing", accept_path(booking.trip.id, remove_listing: true), class: "button", method: :patch, controller: :bookings_controller %>
            </div>
          </div>
        </div>
    <% end %>
  </div>
</div>
